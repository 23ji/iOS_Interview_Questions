#  21. 사용자 인터페이스(UI) 테스트와 단위(Unit) 테스트의 차이점은 무엇인가요?

## 1️⃣ Unit 테스트란?

**하나의 기능이 제대로 동작하는지 확인하는 테스트**

예시

* 함수 하나
* 메서드 하나
* ViewModel 로직 하나

```swift
func add(a: Int, b: Int) -> Int {
    a + b
}
```

👉 `add(1, 2)`가 3인지 테스트하는 것

특징

* 빠름
* 실패 원인 찾기 쉬움
* UI랑 무관
* 개발자가 가장 많이 작성함

---

## 2️⃣ UI 테스트란?

**사용자 입장에서 앱을 실제로 눌러보는 테스트**

예시

* 버튼 탭
* 화면 전환
* 텍스트 입력
* 로그인 흐름 전체

👉 사람이 앱 쓰는 걸 로봇이 대신 해주는 느낌

특징

* 느림
* 실제 앱 동작 검증 가능
* 크래시, 화면 연결 문제 발견 가능
* 유지보수 비용 큼

---

## 3️⃣ Unit 테스트 vs UI 테스트 한눈에 정리

| 구분     | Unit 테스트 | UI 테스트    |
| ------ | -------- | --------- |
| 테스트 대상 | 로직       | 실제 화면     |
| 속도     | 매우 빠름    | 느림        |
| 안정성    | 높음       | 상대적으로 낮음  |
| 목적     | 기능 검증    | 사용자 흐름 검증 |

👉 **로직은 Unit**, **흐름은 UI**

---

# 2️⃣ XCTest 프레임워크란?

iOS에서 **기본으로 제공되는 테스트 도구**

* Xcode에 기본 포함
* Unit / UI 테스트 둘 다 가능
* 별도 라이브러리 필요 없음

---

## XCTest 기본 구조

```swift
import XCTest

final class CalculatorTests: XCTestCase {

    func testAdd() {
        let result = 1 + 2
        XCTAssertEqual(result, 3)
    }
}
```

핵심 요소

* `XCTestCase` 상속
* `test`로 시작하는 메서드
* `XCTAssert` 계열로 검증

---

## 자주 쓰는 Assert

* `XCTAssertTrue`
* `XCTAssertFalse`
* `XCTAssertEqual`
* `XCTAssertNil`
* `XCTAssertNotNil`

👉 “예상 결과가 맞는지 확인”

---

# 3️⃣ TDD(Test Driven Development)란?

**코드를 먼저 짜지 않고, 테스트를 먼저 만드는 개발 방식**

순서

1. 실패하는 테스트 작성
2. 테스트 통과하는 최소 코드 작성
3. 리팩토링

---

## TDD의 장점

* 요구사항이 명확해짐
* 버그 조기 발견
* 리팩토링이 두렵지 않음
* 코드 품질 좋아짐

👉 테스트가 곧 **명세서 역할**

---

# 4️⃣ 테스트하기 어려운 코드의 문제

이런 코드 테스트하기 힘듦

* 싱글톤 남발
* 네트워크 직접 호출
* DB 직접 접근
* 외부 객체에 강하게 의존

👉 테스트하려면 **의존성 분리** 필요

---

# 5️⃣ 의존성 주입(DI)이란?

**객체가 직접 만들지 않고, 밖에서 주입받는 방식**

❌ 나쁜 예

```swift
class ViewModel {
    let service = NetworkService()
}
```

👉 테스트에서 NetworkService를 바꿀 수 없음

---

## ✅ 의존성 주입 예시

```swift
protocol NetworkServiceProtocol {
    func fetch()
}

class ViewModel {
    let service: NetworkServiceProtocol

    init(service: NetworkServiceProtocol) {
        self.service = service
    }
}
```

👉 테스트용 Mock 주입 가능

---

## 테스트에서 이렇게 사용

```swift
class MockNetworkService: NetworkServiceProtocol {
    func fetch() { }
}

let vm = ViewModel(service: MockNetworkService())
```

👉 네트워크 없이 테스트 가능

---

# 📌 처음 공부용 핵심 요약

* Unit 테스트: 로직 검증
* UI 테스트: 사용자 흐름 검증
* XCTest: iOS 기본 테스트 도구
* TDD: 테스트 먼저, 코드 나중
* DI: 테스트 가능한 코드의 핵심
* 테스트 잘 되려면 의존성 분리 필수
