#  21. iOS에서 메모리 사이즈와 관련된 개념과 고려 사항에 대해 설명해주세요.

## 1️⃣ iOS 메모리 기본 개념

* iOS 앱은 **메모리 사용량 제한** 있음
* 많이 쓰면 시스템이 **강제 종료(OOM)** 시킴
* 특히 이미지, 캐시, 대용량 데이터 주의해야 함

👉 “메모리는 넉넉하지 않다”가 기본 전제

---

## 2️⃣ 메모리 사이즈에서 중요한 것들

### ① 객체 크기

* struct / class 크기
* 멤버 변수 많을수록 메모리 증가

### ② 참조 타입 vs 값 타입

* class: 참조 전달 → retain 관리 필요
* struct: 값 복사 → 크면 비용 큼

### ③ 컬렉션 사용

* Array, Dictionary에 대용량 데이터 주의
* 한 번에 다 들고 있지 말고 필요할 때 로드

---

## 3️⃣ 메모리 정렬(Alignment)이란?

**데이터를 메모리에 배치할 때 CPU가 읽기 편한 위치에 맞춰 정렬하는 것**

예:

* Int64 → 8바이트 단위 정렬
* Int32 → 4바이트 단위 정렬

---

## 4️⃣ 메모리 정렬이 성능에 미치는 영향

### 정렬이 잘 된 경우

* CPU가 **한 번에 읽음**
* 빠름
* 추가 연산 없음

### 정렬이 안 된 경우

* CPU가 **여러 번 나눠서 읽음**
* 느려짐
* 성능 저하 발생

👉 “비뚤게 놓인 책은 꺼내기 힘듦”

---

## 5️⃣ Swift에서 정렬 관련 포인트

* Swift 컴파일러가 **대부분 자동으로 정렬 처리**
* 개발자가 직접 맞출 일은 거의 없음
* 하지만 **구조체 멤버 순서**는 영향 있음

```swift
struct Bad {
    let a: Bool   // 1
    let b: Int64  // 8
}

struct Good {
    let b: Int64  // 8
    let a: Bool   // 1
}
```

👉 큰 타입 → 작은 타입 순서가 유리

---

## 6️⃣ iOS 개발 시 메모리 고려 체크리스트

* 이미지 리사이징해서 사용
* 필요 없는 객체 빨리 해제
* retain cycle 방지
* 대용량 데이터 lazy 로딩
* 구조체 멤버 정렬 의식하기

---

## 📌 평생 기억용 요약

* iOS는 메모리 제한 있음
* 메모리 많이 쓰면 앱 죽음
* 정렬은 CPU가 빠르게 읽기 위한 배치
* 정렬 안 맞으면 성능 저하
* Swift는 대부분 자동 처리하지만 구조체 순서는 영향 있음
