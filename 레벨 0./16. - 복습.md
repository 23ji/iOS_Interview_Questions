#  16. REST API와 iOS에서의 네트워크 요청 및 응답 처리 방법에 대해 설명해주세요.

## 🌐 1️⃣ REST API란?

**REST (Representational State Transfer)** =
서버와 클라이언트가 데이터를 주고받는 “약속된 방식(규칙)”

* 웹에서 통신할 때 **HTTP 기반**으로 동작함
* 데이터를 **JSON** 형태로 주고받는 게 일반적임

💡 **비유**
👉 서버는 음식점 주방
👉 클라이언트(iOS 앱)는 주문하는 손님
👉 REST API는 “메뉴판” (규칙과 약속)

---

## 🧭 2️⃣ REST의 핵심 원칙

| HTTP 메서드 | 역할           | 비유          |
| -------- | ------------ | ----------- |
| `GET`    | 데이터 가져오기     | 음식 주문 조회    |
| `POST`   | 새 데이터 생성     | 주문 새로 넣기    |
| `PUT`    | 기존 데이터 전체 수정 | 주문 내용 전체 변경 |
| `PATCH`  | 일부 수정        | 주문 중 일부만 수정 |
| `DELETE` | 삭제           | 주문 취소       |

---

## 📦 3️⃣ iOS에서 네트워크 요청 보내는 방법 (`URLSession`)

Swift에서 가장 기본이자 표준적인 방법은 **`URLSession`**

### 📍 기본 흐름

1. 요청할 주소(`URL`)를 만듦
2. `URLRequest`로 요청 세부 설정 (method, header, body 등)
3. `URLSession.shared.dataTask()`로 서버에 요청 보냄
4. 응답(`response`, `data`, `error`) 받아 처리

---

### ✅ 예제 코드

```swift
// NetworkService.swift

import Foundation

struct User: Codable {
    let name: String
    let age: Int
}

func fetchUserData() {
    guard let url = URL(string: "https://api.example.com/user") else { return }

    let task = URLSession.shared.dataTask(with: url) { data, response, error in
        if let error = error {
            print("❌ 요청 실패: \(error.localizedDescription)")
            return
        }

        guard let data = data else { return }

        do {
            let user = try JSONDecoder().decode(User.self, from: data)
            print("✅ 사용자 이름: \(user.name), 나이: \(user.age)")
        } catch {
            print("⚠️ 디코딩 실패: \(error.localizedDescription)")
        }
    }

    task.resume() // 요청 시작!
}
```

💡 **정리 포인트**

* `.dataTask` → 비동기로 동작 (백그라운드 스레드)
* `resume()` 호출해야 요청이 실제로 전송됨
* `JSONDecoder()`로 JSON → Swift 구조체로 변환

---

## 🧠 4️⃣ 응답 처리 방법

| 상황                      | 처리 방법                           |
| ----------------------- | ------------------------------- |
| 성공 응답 (200)             | JSON 디코딩 후 UI 업데이트 (메인 스레드에서!)  |
| 실패 응답 (400, 404, 500 등) | 상태 코드 확인 후 오류 메시지 표시            |
| 네트워크 에러                 | `error.localizedDescription` 출력 |

---

## 🔒 5️⃣ REST API + 보안

* HTTPS 프로토콜로 통신 (데이터 암호화)
* 토큰 기반 인증 사용 (`Bearer Token` / `JWT`)
* 민감한 정보(Key 등)는 절대 코드에 하드코딩 X

---

## 🚀 6️⃣ 핵심 요약

| 개념          | 한 줄 요약                           |
| ----------- | -------------------------------- |
| REST API    | 클라이언트-서버 간 데이터 주고받는 약속           |
| HTTP 메서드    | GET, POST, PUT, DELETE 등으로 작업 구분 |
| URLSession  | 네트워크 요청을 보내는 iOS 기본 도구           |
| JSONDecoder | 서버 응답을 Swift 객체로 변환              |
| HTTPS       | 통신 보안을 위한 암호화 프로토콜               |

---

💡 **한 줄로 외워두기**

> iOS에서 REST API는 “HTTP 규칙으로 JSON을 주고받는 시스템”이고,
> `URLSession`은 “그걸 실제로 요청·응답 처리하는 Swift 도구”임
